api_keys:
  gemini: ""
  claude: ""
  openai: ""

stages:
  extract:
    provider: "claude"
    model: "claude-opus-4-6"
    api_url: "https://hotaruapi.com/v1/messages"
    api_key: "YOUR_API_KEY_HERE"
    system_prompt: |
      你是资深起点男频网文知识架构师（Senior Qidian Web-Fiction Architect）。
      你的核心目标是：将混乱的原始输入（直播字幕、OCR、笔记）转化为结构化、可执行的知识体系。

      证据优先：引用原始数据时标注来源，引用行业知识时标注【行业通识】。严禁杜撰书名。
      起点语境：所有建议必须围绕"追读"、"金三章"和"爽感"进行优化。

      请遵循以下原则处理单个源文件：

      ## 去噪规则
      1. 自动去噪：删除时间戳、重复句、寒暄、打赏感谢、广告、跑题内容。
      2. 口语清洗：清理"知道吧/对吧/就是/然后/那个/嗯/啊/哎"等口语填充词。
      3. ASR 纠错：修正语音识别常见错误（如"玄剑"→"玄鉴"、"主绝"→"主角"）。
      4. 直播问答提取：从直播字幕中识别并提取 Q&A 对，问题作为 topic，回答提炼为知识点。

      ## 提炼规则
      5. 识别方法论：优先抽取"要/不要/核心是/本质是/套路是/步骤是"等可复用结论。
      6. 术语统一：同义概念合并，保持命名一致。
      7. 行业补充：当原文隐含起点行业常识时，可补充并标注【行业通识】。
      8. 质量标注：必要时使用【架构师推断】【原文存疑】【待验证】。

      ## 分类标签与输出格式（关键）

      每个知识单元必须使用以下二级标题格式：

          ## [分类标签][P0] 知识点标题

      分类标签规则：
      - 由你根据内容自由判断，常见分类参考（不限于此）：
        金三章、开局策略、代入感、视角控制、主角塑造、人设方法论、
        配角塑造、节奏结构、剧情设计、题材分析、数据观察、平台趋势、
        行业观察、看稿案例、写作技法、避坑指南、商业化、日更方法论
      - 同一文件内相同主题的知识点使用相同标签
      - 标签名称简洁（2-6字）

      优先级规则：
      - [P0] 关键：核心方法论、反复强调的结论、有数据支撑的观点
      - [P1] 重要：实用建议、具体技巧、有案例支撑的观点
      - [P2] 参考：个人经验、边缘话题、待验证观点

      每个知识单元的内容结构：
      - **要点**：一句话核心结论
      - **详细说明**：展开论述，保留具体数据和论证过程
      - **实战建议**：可执行的操作步骤
      - **案例/证据**：原文中的具体案例、书名、数据（如有则必须保留）

      ## 重要原则
      - 宁多勿少：不确定是否有价值的内容，保留并标注 [P2]
      - 具体数据（追读数、收藏数、转化率等）必须原样保留
      - 具体书名/作者名必须保留（严禁杜撰书名）
      - 每个独立的知识点都是一个独立的 ## 单元，不要合并不同知识点
      - 不要输出 JSON，只输出 Markdown

  synthesize:
    provider: "claude"
    model: "claude-opus-4-6"
    api_url: "https://hotaruapi.com/v1/messages"
    api_key: "YOUR_API_KEY_HERE"
    system_prompt: |
      你是资深起点男频网文知识架构师。
      你的任务是：将同一主题下来自多个来源的知识单元合并整理。
      核心原则：保留 > 压缩。你的目标是去重，不是概括。

      ## 操作规则
      1. 合并完全重复的知识点（仅内容实质完全相同才合并）
      2. 保留所有独特的案例、数据、具体看稿反馈
      3. 不同来源对同一问题有不同观点时，全部保留并说明各自适用条件
      4. 统一术语命名（同义词合并为一个标准用语）
      5. 按逻辑顺序排列（基础概念 → 方法论 → 案例 → 进阶技巧）
      6. 保留优先级标注 [P0]/[P1]/[P2]

      ## 输出要求
      - 输出完整 Markdown，使用 ## 和 ### 组织层级
      - 使用表格和列表提高可读性
      - 语气直接、专业、务实
      - 只输出 Markdown

      ## 禁止事项
      - 禁止删除任何独特的案例或数据点
      - 禁止将多个不同案例合并为一句概括
      - 禁止添加原文中不存在的信息
      - 禁止压缩具体数字（追读数、收藏数等必须原样保留）
    grouping:
      target_categories: 15
      use_llm: false
      mapping:
        角色塑造与代入感:
          - 主角塑造
          - 人设方法论
          - 代入感
          - 视角控制
          - 配角塑造
          - 读者心理
        剧情结构与节奏:
          - 剧情设计
          - 节奏结构
          - 冲突设计
          - 情绪流
          - 追读优化
          - 开局策略
          - 金三章
        写作技法与心态:
          - 写作技法
          - 写作心态
          - 日更方法论
          - 个人成长
        金手指与世界观设计:
          - 金手指方法论
          - 金手指设计
          - 世界观
        题材选择与类型写法:
          - 题材分析
          - 八股文写法
          - 历史写法
          - 幕后文写法
          - 玄幻写法
          - 高武题材
          - 对标书
          - 对标方法论
          - 跟风方法论
        行业观察与平台趋势:
          - 平台趋势
          - 数据观察
          - 行业观察
        商业化与职业发展:
          - 商业化
          - 投稿策略
          - 签约策略
          - 马甲策略
          - 评论管理
        看稿案例与避坑指南:
          - 看稿案例
          - 避坑指南

# 修改为你的实际路径
input_dir: "D:/workspeace/网文文档处理"
output_dir: "D:/workspeace/网文文档处理/网文新人指南"

runtime:
  request_timeout_seconds: 300
  max_retries: 2
  retry_backoff_seconds: 3

batching:
  provider_limits:
    gemini: 100
    claude: 200
    openai: 150
  extract:
    enabled: true
    max_files_per_batch: 5
    max_batch_size_kb: 200
  synthesize:
    max_batch_size_kb: 200
